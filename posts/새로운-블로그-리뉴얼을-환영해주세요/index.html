<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>[블로그 개선] 새로운 블로그 리뉴얼을 환영해주세요 | blog.moozeh</title>
<meta name="keywords" content="">
<meta name="description" content="2025학년도 1학기를 보내면서 글을 쓸 기회가 많이 없어졌었습니다. 사실 자잘하게 글을 쓰고 문서를 하는 일은 많이 했으나, 실제로 완벽한 블로그 글을 작성해야한다. 라는 머릿속의 집착 때문에 글을 쓰는 것이 두려워 진것도 사실입니다.
더군다나 불편한 점도 많이 느끼고 있었는데, 이에 블로그 작성 방법을 개선해서 프로젝트(끝이 나는 작업)이 끝나게 되면 자연스럽게 블로그 글도 쓸 수 있도록 환경을 조성하려고 하였고, 그러다보니 블로그 구조를 개선하게 되었습니다.
블로그 개선 이유
1. 블로그 빌드 속도 개선
Ruby 언어로 만들어진 지킬은 Go 언어로 만들어졌습니다. 그러다보니 Ruby 를 위한 의존성 설치와 세팅 시간이 많이 잡아먹게 되고, 최종적으로 빌드 시 1분이 걸리는 불상사가 일어납니다.">
<meta name="author" content="moozeh">
<link rel="canonical" href="https://blog.moozeh.org/posts/%EC%83%88%EB%A1%9C%EC%9A%B4-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EB%A6%AC%EB%89%B4%EC%96%BC%EC%9D%84-%ED%99%98%EC%98%81%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.580d5c4b37c6350e62c76a9e39ccff4785bf5e515b18b3cb0605dea4cc5f5376.css" integrity="sha256-WA1cSzfGNQ5ix2qeOcz/R4W/XlFbGLPLBgXepMxfU3Y=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.moozeh.org/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.moozeh.org/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.moozeh.org/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://blog.moozeh.org/apple-touch-icon.png">
<link rel="mask-icon" href="https://blog.moozeh.org/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://blog.moozeh.org/posts/%EC%83%88%EB%A1%9C%EC%9A%B4-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EB%A6%AC%EB%89%B4%EC%96%BC%EC%9D%84-%ED%99%98%EC%98%81%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://blog.moozeh.org/posts/%EC%83%88%EB%A1%9C%EC%9A%B4-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EB%A6%AC%EB%89%B4%EC%96%BC%EC%9D%84-%ED%99%98%EC%98%81%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94/">
  <meta property="og:site_name" content="blog.moozeh">
  <meta property="og:title" content="[블로그 개선] 새로운 블로그 리뉴얼을 환영해주세요">
  <meta property="og:description" content="2025학년도 1학기를 보내면서 글을 쓸 기회가 많이 없어졌었습니다. 사실 자잘하게 글을 쓰고 문서를 하는 일은 많이 했으나, 실제로 완벽한 블로그 글을 작성해야한다. 라는 머릿속의 집착 때문에 글을 쓰는 것이 두려워 진것도 사실입니다.
더군다나 불편한 점도 많이 느끼고 있었는데, 이에 블로그 작성 방법을 개선해서 프로젝트(끝이 나는 작업)이 끝나게 되면 자연스럽게 블로그 글도 쓸 수 있도록 환경을 조성하려고 하였고, 그러다보니 블로그 구조를 개선하게 되었습니다.
블로그 개선 이유 1. 블로그 빌드 속도 개선 Ruby 언어로 만들어진 지킬은 Go 언어로 만들어졌습니다. 그러다보니 Ruby 를 위한 의존성 설치와 세팅 시간이 많이 잡아먹게 되고, 최종적으로 빌드 시 1분이 걸리는 불상사가 일어납니다.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-08-24T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-08-24T00:00:00+00:00">
      <meta property="og:image" content="https://blog.moozeh.org/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://blog.moozeh.org/images/papermod-cover.png">
<meta name="twitter:title" content="[블로그 개선] 새로운 블로그 리뉴얼을 환영해주세요">
<meta name="twitter:description" content="2025학년도 1학기를 보내면서 글을 쓸 기회가 많이 없어졌었습니다. 사실 자잘하게 글을 쓰고 문서를 하는 일은 많이 했으나, 실제로 완벽한 블로그 글을 작성해야한다. 라는 머릿속의 집착 때문에 글을 쓰는 것이 두려워 진것도 사실입니다.
더군다나 불편한 점도 많이 느끼고 있었는데, 이에 블로그 작성 방법을 개선해서 프로젝트(끝이 나는 작업)이 끝나게 되면 자연스럽게 블로그 글도 쓸 수 있도록 환경을 조성하려고 하였고, 그러다보니 블로그 구조를 개선하게 되었습니다.
블로그 개선 이유
1. 블로그 빌드 속도 개선
Ruby 언어로 만들어진 지킬은 Go 언어로 만들어졌습니다. 그러다보니 Ruby 를 위한 의존성 설치와 세팅 시간이 많이 잡아먹게 되고, 최종적으로 빌드 시 1분이 걸리는 불상사가 일어납니다.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://blog.moozeh.org/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "[블로그 개선] 새로운 블로그 리뉴얼을 환영해주세요",
      "item": "https://blog.moozeh.org/posts/%EC%83%88%EB%A1%9C%EC%9A%B4-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EB%A6%AC%EB%89%B4%EC%96%BC%EC%9D%84-%ED%99%98%EC%98%81%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "[블로그 개선] 새로운 블로그 리뉴얼을 환영해주세요",
  "name": "[블로그 개선] 새로운 블로그 리뉴얼을 환영해주세요",
  "description": "2025학년도 1학기를 보내면서 글을 쓸 기회가 많이 없어졌었습니다. 사실 자잘하게 글을 쓰고 문서를 하는 일은 많이 했으나, 실제로 완벽한 블로그 글을 작성해야한다. 라는 머릿속의 집착 때문에 글을 쓰는 것이 두려워 진것도 사실입니다.\n더군다나 불편한 점도 많이 느끼고 있었는데, 이에 블로그 작성 방법을 개선해서 프로젝트(끝이 나는 작업)이 끝나게 되면 자연스럽게 블로그 글도 쓸 수 있도록 환경을 조성하려고 하였고, 그러다보니 블로그 구조를 개선하게 되었습니다.\n블로그 개선 이유 1. 블로그 빌드 속도 개선 Ruby 언어로 만들어진 지킬은 Go 언어로 만들어졌습니다. 그러다보니 Ruby 를 위한 의존성 설치와 세팅 시간이 많이 잡아먹게 되고, 최종적으로 빌드 시 1분이 걸리는 불상사가 일어납니다.\n",
  "keywords": [
    
  ],
  "articleBody": "2025학년도 1학기를 보내면서 글을 쓸 기회가 많이 없어졌었습니다. 사실 자잘하게 글을 쓰고 문서를 하는 일은 많이 했으나, 실제로 완벽한 블로그 글을 작성해야한다. 라는 머릿속의 집착 때문에 글을 쓰는 것이 두려워 진것도 사실입니다.\n더군다나 불편한 점도 많이 느끼고 있었는데, 이에 블로그 작성 방법을 개선해서 프로젝트(끝이 나는 작업)이 끝나게 되면 자연스럽게 블로그 글도 쓸 수 있도록 환경을 조성하려고 하였고, 그러다보니 블로그 구조를 개선하게 되었습니다.\n블로그 개선 이유 1. 블로그 빌드 속도 개선 Ruby 언어로 만들어진 지킬은 Go 언어로 만들어졌습니다. 그러다보니 Ruby 를 위한 의존성 설치와 세팅 시간이 많이 잡아먹게 되고, 최종적으로 빌드 시 1분이 걸리는 불상사가 일어납니다.\n그래서 문제를 해결하기 위해 검색하던 중, 검색 결과 node_modules 의 문제가 있었음을 알았습니다.\n실제로 제 블로그 github workflow 로그를 확인하면, 루비 세팅 시간이 많이 걸리는 것을 확인할 수 있었습니다.\n![[새로운 블로그 리뉴얼을 환영해주세요!-1756027776764.webp]]\n문제는 이 결과가 사실은 루비 빌드 시 node_modules 를 포함한 여러 디렉토리를 제외한 값이라는 것입니다…\n실제로 로컬환경에서 루비를 세팅하고 버전 관리하는 것부터 너무나도 복잡했습니다.\n![[새로운 블로그 리뉴얼을 환영해주세요!-1756027851593.webp]]\n실제로 제 블로그 프로젝트에서 빌드 시 exclude 할 폴더에 노드 모듈이 포함되어 있습니다.\nGo 에 관심이 많기도 했고, 후술할 이유로 조금 더 개선을 위해 다른 테마를 찾으려고 했습니다.\n2. 블로그 디자인 단순화 이유라기 보다는 변경점에 가깝습니다.\n사실 양쪽에 프로필 / ToC / 최근 업데이트 문서 등 불필요한 정보가 너무나도 많다고 생각이 들었습니다.\n이번에 블로그를 개선하면서 오로지 문서에 집중해보고 싶었습니다. 그리고 배경은 이쁘다고 생각해서 넣었는데 오히려 불호에 가까운 피드백을 받았습니다.. 계속 보니 가독성 자체에는 좋지 않다고 보이더라고요.\n이전 블로그의 디자인을 그대로 가져오기 위해 시간 투자를 하기에는 아깝다고 생각이 들어 어쩔 수 없지만 간단하게 디자인을 변경하였습니다.\n![[새로운 블로그 리뉴얼을 환영해주세요!-1756026623283.webp]]\n이전 디자인은 이랬는데, 조금 어두운 면도 있고, 글자 색상도 어두워서 가독성이 떨어진다고 생각하였고, 이런 부분을 개선했습니다.\n무엇보다 가독성에 집중하도록 노력했습니다.\n다른 테마를 사용하면 어떨지 모르겠는데, 이미 chirpy 테마에 고착화되어서 새롭게 블로그를 리뉴얼 해보는 것도 나쁘지 않다고 판단했습니다.\n또한, 가독성에 집중하기 위해 word-break: keep-all; 옵션을 넣어주었습니다.\n띄어쓰기가 있는 한글 특성상 단어를 잘라서 줄바꿈을 하지 않고, 단어 단위로 줄바꿈을 해주는 keep-all 특성이 좋다고 판단하여 적용해보았습니다.\n.post-single p { word-break: keep-all; } 3. 옵시디언 통합 이전까지는 옵시디언 볼트(프로젝트)를 블로그용, 나누고 있었습니다. 그렇기 때문에 더더욱 블로그 글을 안쓴 것도 있는 것 같습니다.\n문서화 와 블로그 글 작성 사이에서 조금 괴리감을 느끼고 있었던 것도 있었습니다. 더더욱 블로그 글은 완벽하게 써야한다고 생각하게 돼서 잘 안쓰게 됐고, 더욱이나 접근성도 안좋아지니 블로그 작성 자체에 눈을 들이게 되는 일이 많이 줄었습니다.\n![[새로운 블로그 리뉴얼을 환영해주세요!-1756026537606.webp|200]]\n그래서 보시는 것처럼 실제로 PARA 노트 기법으로 작성중인 제 옵시디언 볼트 입니다. 이 부분에 리소스(혹은 아카이브) 부분에 블로그 탭을 추가하여 버전관리를 하기로 했습니다.\n그렇다면 이제 문제가 생깁니다.\n버전관리는 어떻게 할 것인가?\n실제로 제 볼트 내에서는 깃허브로 공유해서는 안되는 중요자료들이 많습니다.\n이 부분에 있어서 고민이 많이 되었는데, 결국 블로그 .git 프로젝트 자체를 icloud 내에 전부 넣었습니다. (…)\nicloud 자체가 기본이 5GB라서 프로젝트 하나를 넣어두기엔 충분하다고 생각하고, 최근에 볼트에서 webp 포맷으로 변경하여 이미지 크기를 최적화했기 때문에.. 상관없다고 판단했다.\nmodule: mounts: - source: content target: content - source: \"../99. Images\" target: \"assets\" - source: \"../03. Resources/BlogPosts\" target: \"content/posts\" 그리고 실제로 내가 쓰는 옵시디언 볼트에서는 03. Resources 폴더에 자주 보는 자료들은 이곳에 넣는다.\n블로그로 공개할 문서들은 BlogPosts 에 넣고 CLI에서 커밋을 날리면 자연스럽게 블로그 포스트도 가능하도록 만들어주었다!\n옵시디언 이미지 문법 인식을 위한 hugo 플러그인 생성 이전에 chirpy 테마로 넘어오면서 대부분의 프론트매터는 수정해주었지만, 이번엔 그럴필요 없도록 했다.\n무언가 마이그레이션한다면 기존 리소스는 최대한 수정할 일이 없어야한다고 생각하기 때문에 최대한 노력해보았다.\n이번에도 그래서 최대한 프론트매터를 호환되게 만들었고, 특히 이미지처리할 때 별도의 플러그인을 휴고 문법에 맞게 만들었다. (이부분은 내가 문법을 몰라서 제미니한테 물어보면서 코드를 짰다.)\n혹시 필요할 일이 있을까봐 코드를 공유한다.\n이 코드는 layouts/_default/_markup/render-image.html 파일인데, assets 폴더에서 이미지 파일을 찾아오는 플러그인이다.\n{{- $alt := .Text -}} {{- $destination := .Destination -}} {{- $isExternal := strings.HasPrefix $destination \"http\" -}} {{- if not $isExternal -}} {{/* target이 \"assets\"이므로 바로 파일명을 찾습니다. */}} {{- $image := resources.Get (strings.TrimPrefix \"/\" $destination) -}} {{- if $image -}} \u003cimg src=\"{{ $image.RelPermalink }}\" alt=\"{{ $alt }}\" loading=\"lazy\"\u003e {{- else -}} \u003cp style=\"color: red;\"\u003eAsset not found: {{ $destination }}\u003c/p\u003e {{- end -}} {{- else -}} \u003cimg src=\"{{ $destination | safeURL }}\" alt=\"{{ $alt }}\" loading=\"lazy\"\u003e {{- end -}} 두번째로 layouts/_default/single.html 이다. 포스트 페이지를 구성하는 코드인데, PaperMod 라는 테마를 사용하면서 그대로 긁어와서 Content 부분만 수정해주었다.\n![[]] 같은 위키링크 형태로 옵시디언에서는 이미지를 링킹을 하는데, 공식 마크다운 이미지 문법인 ![]() 을 쓰지 않은 이유로는 이미 만들어진 문서들이 대부분 위키링크 형태이기 때문이다.\n{{- define \"main\" }} \u003carticle class=\"post-single\"\u003e \u003cheader class=\"post-header\"\u003e {{ partial \"breadcrumbs.html\" . }} \u003ch1 class=\"post-title entry-hint-parent\"\u003e {{ .Title }} {{- if .Draft }} \u003cspan class=\"entry-hint\" title=\"Draft\"\u003e \u003csvg xmlns=\"http://www.w3.org/2000/svg\" height=\"35\" viewBox=\"0 -960 960 960\" fill=\"currentColor\"\u003e \u003cpath d=\"M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z\" /\u003e \u003c/svg\u003e \u003c/span\u003e {{- end }} \u003c/h1\u003e {{- if .Description }} \u003cdiv class=\"post-description\"\u003e {{ .Description }} \u003c/div\u003e {{- end }} {{- if not (.Param \"hideMeta\") }} \u003cdiv class=\"post-meta\"\u003e {{- partial \"post_meta.html\" . -}} {{- partial \"translation_list.html\" . -}} {{- partial \"edit_post.html\" . -}} {{- partial \"post_canonical.html\" . -}} \u003c/div\u003e {{- end }} \u003c/header\u003e {{- $isHidden := (.Param \"cover.hiddenInSingle\") | default (.Param \"cover.hidden\") | default false }} {{- partial \"cover.html\" (dict \"cxt\" . \"IsSingle\" true \"isHidden\" $isHidden) }} {{- if (.Param \"ShowToc\") }} {{- partial \"toc.html\" . }} {{- end }} {{- if .Content }} {{- $content := .RawContent -}} {{- $find := \"!\\\\[\\\\[(.*?)\\\\]\\\\]\" -}} {{- $matches := findRE $find $content -}} {{- range $matches -}} {{- $originalMatch := . -}} {{- $pathAndWidth := replaceRE $find \"$1\" $originalMatch -}} {{- $path := $pathAndWidth -}} {{- $width := \"\" -}} {{- if strings.Contains $pathAndWidth \"|\" -}} {{- $parts := split $pathAndWidth \"|\" -}} {{- $path = index $parts 0 -}} {{- $width = index $parts 1 -}} {{- end -}} {{- $image := resources.Get $path -}} {{- if $image -}} {{- $imgTag := printf \"\u003cimg src=\\\"%s\\\" alt=\\\"%s\\\" loading=\\\"lazy\\\"\" $image.RelPermalink (strings.TrimSuffix \".webp\" (strings.TrimSuffix \".png\" (strings.TrimSuffix \".jpg\" $path))) -}} {{- if $width -}} {{- $imgTag = printf \"%s style=\\\"width: %spx;\\\"\u003e\" $imgTag $width -}} {{- else -}} {{- $imgTag = printf \"%s\u003e\" $imgTag -}} {{- end -}} {{- $content = replace $content $originalMatch $imgTag -}} {{- end -}} {{- end -}} {{- $finalContent := $content | .RenderString -}} \u003cdiv class=\"post-content\"\u003e {{- if not (.Param \"disableAnchoredHeadings\") }} {{- partial \"anchored_headings.html\" $finalContent -}} {{- else }} {{- $finalContent | safeHTML -}} {{- end }} \u003c/div\u003e {{- end }} \u003cfooter class=\"post-footer\"\u003e {{- $tags := .Language.Params.Taxonomies.tag | default \"tags\" }} \u003cul class=\"post-tags\"\u003e {{- range ($.GetTerms $tags) }} \u003cli\u003e\u003ca href=\"{{ .Permalink }}\"\u003e{{ .LinkTitle }}\u003c/a\u003e\u003c/li\u003e {{- end }} \u003c/ul\u003e {{- if (.Param \"ShowPostNavLinks\") }} {{- partial \"post_nav_links.html\" . }} {{- end }} {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }} {{- partial \"share_icons.html\" . -}} {{- end }} \u003c/footer\u003e {{- if (.Param \"comments\") }} {{- partial \"comments.html\" . }} {{- end }} \u003c/article\u003e {{- end }}{{/* end main */}} 크게 건드렸던 건 이렇게 두개였던 것 같고, 한 4시간 정도 걸렸던 것 같다.\n배포과정 중 생긴 문제해결 과정 그리고 배포를 할 것인데, 그냥 끼얹기보단 새롭게 orphan branch를 만들어서 이 브랜치를 main 브랜치로 바꾸어서 기존 플젝에 업데이트 해보았다.\n우선 공식 hugo 사이트에서 아래 배포 스크립트를 그대로 적용해보았다. TZ만 우리나라 서울로 바꾸어주었고, 그대로 옮겨보았다.\nname: Build and deploy on: push: branches: - main workflow_dispatch: permissions: contents: read pages: write id-token: write concurrency: group: pages cancel-in-progress: false defaults: run: shell: bash jobs: build: runs-on: ubuntu-latest env: DART_SASS_VERSION: 1.90.0 GO_VERSION: 1.24.5 HUGO_VERSION: 0.148.2 NODE_VERSION: 22.18.0 TZ: Europe/Oslo steps: - name: Checkout uses: actions/checkout@v5 with: submodules: recursive fetch-depth: 0 - name: Setup Go uses: actions/setup-go@v5 with: go-version: ${{ env.GO_VERSION }} cache: false - name: Setup Node.js uses: actions/setup-node@v4 with: node-version: ${{ env.NODE_VERSION }} - name: Setup Pages id: pages uses: actions/configure-pages@v5 - name: Create directory for user-specific executable files run: | mkdir -p \"${HOME}/.local\" - name: Install Dart Sass run: | curl -sLJO \"https://github.com/sass/dart-sass/releases/download/${DART_SASS_VERSION}/dart-sass-${DART_SASS_VERSION}-linux-x64.tar.gz\" tar -C \"${HOME}/.local\" -xf \"dart-sass-${DART_SASS_VERSION}-linux-x64.tar.gz\" rm \"dart-sass-${DART_SASS_VERSION}-linux-x64.tar.gz\" echo \"${HOME}/.local/dart-sass\" \u003e\u003e \"${GITHUB_PATH}\" - name: Install Hugo run: | curl -sLJO \"https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_extended_${HUGO_VERSION}_linux-amd64.tar.gz\" mkdir \"${HOME}/.local/hugo\" tar -C \"${HOME}/.local/hugo\" -xf \"hugo_extended_${HUGO_VERSION}_linux-amd64.tar.gz\" rm \"hugo_extended_${HUGO_VERSION}_linux-amd64.tar.gz\" echo \"${HOME}/.local/hugo\" \u003e\u003e \"${GITHUB_PATH}\" - name: Verify installations run: | echo \"Dart Sass: $(sass --version)\" echo \"Go: $(go version)\" echo \"Hugo: $(hugo version)\" echo \"Node.js: $(node --version)\" - name: Install Node.js dependencies run: | [[ -f package-lock.json || -f npm-shrinkwrap.json ]] \u0026\u0026 npm ci || true - name: Configure Git run: | git config core.quotepath false - name: Cache restore id: cache-restore uses: actions/cache/restore@v4 with: path: ${{ runner.temp }}/hugo_cache key: hugo-${{ github.run_id }} restore-keys: hugo- - name: Build the site run: | hugo \\ --gc \\ --minify \\ --baseURL \"${{ steps.pages.outputs.base_url }}/\" \\ --cacheDir \"${{ runner.temp }}/hugo_cache\" - name: Cache save id: cache-save uses: actions/cache/save@v4 with: path: ${{ runner.temp }}/hugo_cache key: ${{ steps.cache-restore.outputs.cache-primary-key }} - name: Upload artifact uses: actions/upload-pages-artifact@v3 with: path: ./public deploy: environment: name: github-pages url: ${{ steps.deployment.outputs.page_url }} runs-on: ubuntu-latest needs: build steps: - name: Deploy to GitHub Pages id: deployment uses: actions/deploy-pages@v4 ![[새로운 블로그 리뉴얼을 환영해주세요-1756097756323.webp]]\n기존 방식보다 무려 40초나 줄었고, 엄청 빠르게 빌드되는 걸 확인할 수 있다.\n이 빌드가 그냥 처음부터 Go 를 다 깔고 하는 걸 생각하면 엄청 빠르단걸 확인할 수 있다.\n![[새로운 블로그 리뉴얼을 환영해주세요-1756098002261.webp]]\n이렇게 이제 블로그 배포가 잘 되는 걸 확인할 수 있다.\n하지만 보는 것처럼 글이 하나도 없다. 이건 당연하다. 왜냐하면 위에서 봤던 것처럼 내 개인 옵시디언 볼트에서 끌어와서 빌드하는 방식이니, 볼트 자체를 깃허브에 업로드하는게 아니니까 그렇다.\n여기서 내가 생각해본게 두가진데,,\nsymlink 같은걸 도입해서 내 볼트에 있는 블로그 포스트도 git이 인식해서 올려줄 수 있도록 하거나 처음부터 블로그 포스트(.md) 들을 git에 업로드하도록 만들기 내가 옵시디언과의 연동성을 생각해볼때 2번은 절대 싫었다. 왜냐하면 내 옵시디언 저장소는 icloud에서 관리되기 때문이다.\n결국엔 symlink 같은걸 도입하거나, 업로드 스크립트를 만들거나 해야할 것 같았다.\n1. 배포를 위해서 심링크를 쓰기 우선, 진짜 symlink가 git에서 진짜 되는지 한번 해볼 필요가 있다. 당시에 git 이 심볼릭 링크를 어떻게 다루는지 몰라서 일단 직접 만들어보았다.\n일단은 컨텐츠를 휴고에서 옮기는 mount 를 삭제하고 심링크를 추가해보았다.\n심링크 추가까지는 너무 잘되었다. 휴고 블로그 서버도 잘 작동되었다. vscode 에서도 단순히 폴더로 인식됐다.\n![[새로운 블로그 리뉴얼을 환영해주세요-1756098346361.webp]]\n하지만 깃에서 추가할 때는 문제가 되었는데, 그 이유는 깃에서는 심링크 자체에서 링크 정보만을 커밋한다.\n그래서 깃허브에서는 “링크되는 정보” 자체만을 저장해서 버전 관리되기 때문에 하드 링크로 바꾸어보려고 했는데.. 이게 어쩌나, 디렉토리는 하드링크를 할 수 없다! 왜냐하면 무한루프가 생길 수 있기 때문이다.\n2. 셸 스크립트 사용 그래서 결국 스크립트를 사용해서 배포용 스크립트를 만들기로 했다. 구글링을 직접 하면서 어떤 방법이 있나 찾아보았다.\n다행히, 옵시디언을 좋아하는 한 개발자분께서 shell commands 라는 옵시디언 플러그인을 만들어두셨다.\nhttps://publish.obsidian.md/shellcommands/Index\n옵시디언 볼트에서 직접 터미널을 통해 셸 스크립트를 실행할 수 있는 플러그인이다.\n그래서 아래처럼 직접 내 블로그 포스트 디렉토리를 찾아 사이트를 빌드해서 그냥 이대로 올렸다.\n어차피 로컬에서 올려야한다면, github action 을 통해서 빌드를 하고 올리는게 낫다고 생각했다.\nrsync 명령어 그런데, mv 를 통해 빌드 파일을 버전관리하는 디렉토리로 옮기던 중 애로 사항이 있었다.\nmv: rename public/archives to public-git/archives: Directory not empty mv: rename public/assets to public-git/assets: Directory not empty mv: rename public/categories to public-git/categories: Directory not empty mv: rename public/page to public-git/page: Directory not empty mv: rename public/posts to public-git/posts: Directory not empty mv: rename public/search to public-git/search: Directory not empty mv: rename public/tags to public-git/tags: Directory not empty To https://github.com/moozeh/blog-static.git e499e5e..5e605e7 main -\u003e main 위처럼 Directory not empty 와 같은 문제가 있었다.\n그래서 어차피 복사할 거 그냥 rsync 명령어를 사용했다.\nrsync 같은 경우 대상을 완벽하게 동일하게 복사해주므로 딱 나에게 필요한 명령어였다.\n이 명령어가 보통 백업할 때 쓰이는 듯하다. 실제로 나중에 백업 프로그램을 만들 일이 생긴다면 이 명령어를 참고해보는 것도 좋을 것 같다.\nrsync -ahv [SORCE_DIR] [TARGET_DIR] 위와 같이 사용하여 복사할 수 있다. 그밖의 옵션에 관해선 이렇다.\n-a 옵션 : 아카이브 모드. 권한, 시간, 심볼릭 링크 등 세세한 정보까지 복사해준다. -v 옵션 : verbose. 스크립트를 사용할 때 아는 그것. 디버깅에 용이하다. -h 옵션 : human readable. 복사할 때 출력시 결과를 KB, MB 등 사람이 보기 편하게 나타내게해준다. push 앞으로의 방침 앞으로 블로그글을 쓸 때는 그냥 타인에게 공유할 일이 잦을 문서, 고민하는 과정을 쓰는 문서 로 나누어서 쓸 것 같다.\n그야 그도 그럴게, 문제 해결을 어떻게 한번에 하겠나? 한번에 해결이 되면 나 혼자 이미 회사를 차렸지.. 계속 고민해서 끊임없이 완벽보단 완주를 노려봐야할 것 같다.\n실제로 부스트캠프를 하면서도 내 고민과정을 제대로 기록하지 못한 것에 후회를 많이 했었는데 아직 좀 더 고쳐야할 것 같아서 내적으로 많이 고민이 되긴 한다.\n내가 완벽하다고 생각하기 보단 계속 이렇게 달려야 좋은 사람이고 발전하는 사람이 아닐까 생각한다. 다시 한번 잘 노력해보자!\n",
  "wordCount" : "1973",
  "inLanguage": "en",
  "image": "https://blog.moozeh.org/images/papermod-cover.png","datePublished": "2025-08-24T00:00:00Z",
  "dateModified": "2025-08-24T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "moozeh"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://blog.moozeh.org/posts/%EC%83%88%EB%A1%9C%EC%9A%B4-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EB%A6%AC%EB%89%B4%EC%96%BC%EC%9D%84-%ED%99%98%EC%98%81%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "blog.moozeh",
    "logo": {
      "@type": "ImageObject",
      "url": "https://blog.moozeh.org/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.moozeh.org/" accesskey="h" title="blog.moozeh (Alt + H)">blog.moozeh</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.moozeh.org/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://blog.moozeh.org/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://blog.moozeh.org/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://blog.moozeh.org/">Home</a>&nbsp;»&nbsp;<a href="https://blog.moozeh.org/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      [블로그 개선] 새로운 블로그 리뉴얼을 환영해주세요
    </h1>
    <div class="post-meta"><span title='2025-08-24 00:00:00 +0000 UTC'>August 24, 2025</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;moozeh

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%eb%b8%94%eb%a1%9c%ea%b7%b8-%ea%b0%9c%ec%84%a0-%ec%9d%b4%ec%9c%a0" aria-label="블로그 개선 이유">블로그 개선 이유</a><ul>
                        
                <li>
                    <a href="#1-%eb%b8%94%eb%a1%9c%ea%b7%b8-%eb%b9%8c%eb%93%9c-%ec%86%8d%eb%8f%84-%ea%b0%9c%ec%84%a0" aria-label="1. 블로그 빌드 속도 개선">1. 블로그 빌드 속도 개선</a></li>
                <li>
                    <a href="#2-%eb%b8%94%eb%a1%9c%ea%b7%b8-%eb%94%94%ec%9e%90%ec%9d%b8-%eb%8b%a8%ec%88%9c%ed%99%94" aria-label="2. 블로그 디자인 단순화">2. 블로그 디자인 단순화</a></li>
                <li>
                    <a href="#3-%ec%98%b5%ec%8b%9c%eb%94%94%ec%96%b8-%ed%86%b5%ed%95%a9" aria-label="3. 옵시디언 통합">3. 옵시디언 통합</a></li></ul>
                </li>
                <li>
                    <a href="#%ec%98%b5%ec%8b%9c%eb%94%94%ec%96%b8-%ec%9d%b4%eb%af%b8%ec%a7%80-%eb%ac%b8%eb%b2%95-%ec%9d%b8%ec%8b%9d%ec%9d%84-%ec%9c%84%ed%95%9c-hugo-%ed%94%8c%eb%9f%ac%ea%b7%b8%ec%9d%b8-%ec%83%9d%ec%84%b1" aria-label="옵시디언 이미지 문법 인식을 위한 hugo 플러그인 생성">옵시디언 이미지 문법 인식을 위한 hugo 플러그인 생성</a></li>
                <li>
                    <a href="#%eb%b0%b0%ed%8f%ac%ea%b3%bc%ec%a0%95-%ec%a4%91-%ec%83%9d%ea%b8%b4-%eb%ac%b8%ec%a0%9c%ed%95%b4%ea%b2%b0-%ea%b3%bc%ec%a0%95" aria-label="배포과정 중 생긴 문제해결 과정">배포과정 중 생긴 문제해결 과정</a><ul>
                        
                <li>
                    <a href="#1-%eb%b0%b0%ed%8f%ac%eb%a5%bc-%ec%9c%84%ed%95%b4%ec%84%9c-%ec%8b%ac%eb%a7%81%ed%81%ac%eb%a5%bc-%ec%93%b0%ea%b8%b0" aria-label="1. 배포를 위해서 심링크를 쓰기">1. 배포를 위해서 심링크를 쓰기</a></li>
                <li>
                    <a href="#2-%ec%85%b8-%ec%8a%a4%ed%81%ac%eb%a6%bd%ed%8a%b8-%ec%82%ac%ec%9a%a9" aria-label="2. 셸 스크립트 사용">2. 셸 스크립트 사용</a></li>
                <li>
                    <a href="#rsync-%eb%aa%85%eb%a0%b9%ec%96%b4" aria-label="rsync 명령어">rsync 명령어</a></li>
                <li>
                    <a href="#push" aria-label="push">push</a></li></ul>
                </li>
                <li>
                    <a href="#%ec%95%9e%ec%9c%bc%eb%a1%9c%ec%9d%98-%eb%b0%a9%ec%b9%a8" aria-label="앞으로의 방침">앞으로의 방침</a>
                </li>
            </ul>
        </div>
    </details>
</div>
<div class="post-content"><p>2025학년도 1학기를 보내면서 글을 쓸 기회가 많이 없어졌었습니다. 사실 자잘하게 글을 쓰고 문서를 하는 일은 많이 했으나, 실제로 <code>완벽한 블로그 글을 작성해야한다.</code> 라는 머릿속의 집착 때문에 글을 쓰는 것이 두려워 진것도 사실입니다.</p>
<p>더군다나 불편한 점도 많이 느끼고 있었는데, 이에 블로그 작성 방법을 개선해서 프로젝트(끝이 나는 작업)이 끝나게 되면 자연스럽게 블로그 글도 쓸 수 있도록 환경을 조성하려고 하였고, 그러다보니 블로그 구조를 개선하게 되었습니다.</p>
<h2 id="블로그-개선-이유">블로그 개선 이유<a hidden class="anchor" aria-hidden="true" href="#블로그-개선-이유">#</a></h2>
<h3 id="1-블로그-빌드-속도-개선">1. 블로그 빌드 속도 개선<a hidden class="anchor" aria-hidden="true" href="#1-블로그-빌드-속도-개선">#</a></h3>
<p><code>Ruby</code> 언어로 만들어진 지킬은 <code>Go</code> 언어로 만들어졌습니다. 그러다보니 <code>Ruby</code> 를 위한 의존성 설치와 세팅 시간이 많이 잡아먹게 되고, 최종적으로 빌드 시 1분이 걸리는 불상사가 일어납니다.</p>
<p>그래서 문제를 해결하기 위해 <a href="https://stackoverflow.com/questions/26855552/jekyll-compiling-seems-way-too-slow">검색하던 중</a>, 검색 결과 <code>node_modules</code> 의 문제가 있었음을 알았습니다.</p>
<p>실제로 제 블로그 <code>github workflow</code> 로그를 확인하면, 루비 세팅 시간이 많이 걸리는 것을 확인할 수 있었습니다.</p>
<img src="/assets/images/%EC%83%88%EB%A1%9C%EC%9A%B4%20%EB%B8%94%EB%A1%9C%EA%B7%B8%20%EB%A6%AC%EB%89%B4%EC%96%BC%EC%9D%84%20%ED%99%98%EC%98%81%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94%21-1756027776764.webp" alt="새로운 블로그 리뉴얼을 환영해주세요!-1756027776764" loading="lazy">
<p>문제는 이 결과가 사실은 루비 빌드 시 <code>node_modules</code> 를 포함한 여러 디렉토리를 제외한 값이라는 것입니다…</p>
<p>실제로 로컬환경에서 루비를 세팅하고 버전 관리하는 것부터 너무나도 복잡했습니다.</p>
<img src="/assets/images/%EC%83%88%EB%A1%9C%EC%9A%B4%20%EB%B8%94%EB%A1%9C%EA%B7%B8%20%EB%A6%AC%EB%89%B4%EC%96%BC%EC%9D%84%20%ED%99%98%EC%98%81%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94%21-1756027851593.webp" alt="새로운 블로그 리뉴얼을 환영해주세요!-1756027851593" loading="lazy">
<p>실제로 제 블로그 프로젝트에서 빌드 시 <code>exclude</code> 할 폴더에 노드 모듈이 포함되어 있습니다.</p>
<p><code>Go</code> 에 관심이 많기도 했고, 후술할 이유로 조금 더 개선을 위해 다른 테마를 찾으려고 했습니다.</p>
<h3 id="2-블로그-디자인-단순화">2. 블로그 디자인 단순화<a hidden class="anchor" aria-hidden="true" href="#2-블로그-디자인-단순화">#</a></h3>
<p>이유라기 보다는 변경점에 가깝습니다.</p>
<p>사실 양쪽에 프로필 / ToC / 최근 업데이트 문서 등 불필요한 정보가 너무나도 많다고 생각이 들었습니다.</p>
<p>이번에 블로그를 개선하면서 오로지 문서에 집중해보고 싶었습니다. 그리고 배경은 이쁘다고 생각해서 넣었는데 오히려 불호에 가까운 피드백을 받았습니다.. 계속 보니 가독성 자체에는 좋지 않다고 보이더라고요.</p>
<p>이전 블로그의 디자인을 그대로 가져오기 위해 시간 투자를 하기에는 아깝다고 생각이 들어 어쩔 수 없지만 간단하게 디자인을 변경하였습니다.</p>
<img src="/assets/images/%EC%83%88%EB%A1%9C%EC%9A%B4%20%EB%B8%94%EB%A1%9C%EA%B7%B8%20%EB%A6%AC%EB%89%B4%EC%96%BC%EC%9D%84%20%ED%99%98%EC%98%81%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94%21-1756026623283.webp" alt="새로운 블로그 리뉴얼을 환영해주세요!-1756026623283" loading="lazy">
<p>이전 디자인은 이랬는데, 조금 어두운 면도 있고, 글자 색상도 어두워서 가독성이 떨어진다고 생각하였고, 이런 부분을 개선했습니다.</p>
<p>무엇보다 <code>가독성</code>에 집중하도록 노력했습니다.</p>
<p>다른 테마를 사용하면 어떨지 모르겠는데, 이미 <code>chirpy</code> 테마에 고착화되어서 새롭게 블로그를 리뉴얼 해보는 것도 나쁘지 않다고 판단했습니다.</p>
<p>또한, 가독성에 집중하기 위해 <code>word-break: keep-all;</code> 옵션을 넣어주었습니다.</p>
<p>띄어쓰기가 있는 한글 특성상 단어를 잘라서 줄바꿈을 하지 않고, 단어 단위로 줄바꿈을 해주는 <code>keep-all</code> 특성이 좋다고 판단하여 적용해보았습니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">post-single</span> <span class="nt">p</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">word-break</span><span class="p">:</span> <span class="n">keep-all</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="3-옵시디언-통합">3. 옵시디언 통합<a hidden class="anchor" aria-hidden="true" href="#3-옵시디언-통합">#</a></h3>
<p>이전까지는 옵시디언 볼트(프로젝트)를 블로그용, 나누고 있었습니다. 그렇기 때문에 더더욱 블로그 글을 안쓴 것도 있는 것 같습니다.</p>
<p><code>문서화</code> 와 <code>블로그 글 작성</code> 사이에서 조금 괴리감을 느끼고 있었던 것도 있었습니다. 더더욱 블로그 글은 완벽하게 써야한다고 생각하게 돼서 잘 안쓰게 됐고, 더욱이나 접근성도 안좋아지니 블로그 작성 자체에 눈을 들이게 되는 일이 많이 줄었습니다.</p>
<img src="/assets/images/%EC%83%88%EB%A1%9C%EC%9A%B4%20%EB%B8%94%EB%A1%9C%EA%B7%B8%20%EB%A6%AC%EB%89%B4%EC%96%BC%EC%9D%84%20%ED%99%98%EC%98%81%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94%21-1756026537606.webp" alt="새로운 블로그 리뉴얼을 환영해주세요!-1756026537606" loading="lazy" style="width: 200px;">
<p>그래서 보시는 것처럼 실제로 <code>PARA</code> 노트 기법으로 작성중인 제 옵시디언 볼트 입니다. 이 부분에 리소스(혹은 아카이브) 부분에 블로그 탭을 추가하여 버전관리를 하기로 했습니다.</p>
<p>그렇다면 이제 문제가 생깁니다.</p>
<blockquote>
<p>버전관리는 어떻게 할 것인가?</p></blockquote>
<p>실제로 제 볼트 내에서는 깃허브로 공유해서는 안되는 중요자료들이 많습니다.</p>
<p>이 부분에 있어서 고민이 많이 되었는데, 결국 블로그 .git 프로젝트 자체를 <code>icloud</code> 내에 전부 넣었습니다. (…)</p>
<p>icloud 자체가 기본이 5GB라서 프로젝트 하나를 넣어두기엔 충분하다고 생각하고, 최근에 볼트에서 <code>webp</code> 포맷으로 변경하여 이미지 크기를 최적화했기 때문에.. 상관없다고 판단했다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">module</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">mounts</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l">content</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l">content</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;../99. Images&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;assets&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;../03. Resources/BlogPosts&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;content/posts&#34;</span><span class="w">
</span></span></span></code></pre></div><p>그리고 실제로 내가 쓰는 옵시디언 볼트에서는 <code>03. Resources</code> 폴더에 자주 보는 자료들은 이곳에 넣는다.</p>
<p>블로그로 공개할 문서들은 <code>BlogPosts</code> 에 넣고 <code>CLI</code>에서 커밋을 날리면 자연스럽게 블로그 포스트도 가능하도록 만들어주었다!</p>
<h2 id="옵시디언-이미지-문법-인식을-위한-hugo-플러그인-생성">옵시디언 이미지 문법 인식을 위한 hugo 플러그인 생성<a hidden class="anchor" aria-hidden="true" href="#옵시디언-이미지-문법-인식을-위한-hugo-플러그인-생성">#</a></h2>
<p>이전에 chirpy 테마로 넘어오면서 대부분의 프론트매터는 수정해주었지만, 이번엔 그럴필요 없도록 했다.</p>
<p><strong>무언가 마이그레이션한다면 기존 리소스는 최대한 수정할 일이 없어야한다고 생각하기 때문에 최대한 노력해보았다.</strong></p>
<p>이번에도 그래서 최대한 프론트매터를 호환되게 만들었고, 특히 이미지처리할 때 별도의 플러그인을 휴고 문법에 맞게 만들었다. (이부분은 내가 문법을 몰라서 제미니한테 물어보면서 코드를 짰다.)</p>
<p>혹시 필요할 일이 있을까봐 코드를 공유한다.</p>
<p>이 코드는 <code>layouts/_default/_markup/render-image.html</code> 파일인데, assets 폴더에서 이미지 파일을 찾아오는 플러그인이다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{{- $alt := .Text -}}
</span></span><span class="line"><span class="cl">{{- $destination := .Destination -}}
</span></span><span class="line"><span class="cl">{{- $isExternal := strings.HasPrefix $destination &#34;http&#34; -}}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">{{- if not $isExternal -}}
</span></span><span class="line"><span class="cl">  {{/* target이 &#34;assets&#34;이므로 바로 파일명을 찾습니다. */}}
</span></span><span class="line"><span class="cl">  {{- $image := resources.Get (strings.TrimPrefix &#34;/&#34; $destination) -}}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  {{- if $image -}}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;{{ $image.RelPermalink }}&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;{{ $alt }}&#34;</span> <span class="na">loading</span><span class="o">=</span><span class="s">&#34;lazy&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  {{- else -}}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;color: red;&#34;</span><span class="p">&gt;</span>Asset not found: {{ $destination }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  {{- end -}}
</span></span><span class="line"><span class="cl">{{- else -}}
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;{{ $destination | safeURL }}&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;{{ $alt }}&#34;</span> <span class="na">loading</span><span class="o">=</span><span class="s">&#34;lazy&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{{- end -}}
</span></span></code></pre></div><p>두번째로 <code>layouts/_default/single.html</code> 이다. 포스트 페이지를 구성하는 코드인데, <code>PaperMod</code> 라는 테마를 사용하면서 그대로 긁어와서 <code>Content</code> 부분만 수정해주었다.</p>
<p><code>![[]]</code> 같은 위키링크 형태로 옵시디언에서는 이미지를 링킹을 하는데, 공식 마크다운 이미지 문법인 <code>![]()</code> 을 쓰지 않은 이유로는 이미 만들어진 문서들이 대부분 위키링크 형태이기 때문이다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">{{- define &#34;main&#34; }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">article</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;post-single&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">header</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;post-header&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {{ partial &#34;breadcrumbs.html&#34; . }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;post-title entry-hint-parent&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      {{ .Title }}
</span></span><span class="line"><span class="cl">      {{- if .Draft }}
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;entry-hint&#34;</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;Draft&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">svg</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&#34;http://www.w3.org/2000/svg&#34;</span> <span class="na">height</span><span class="o">=</span><span class="s">&#34;35&#34;</span> <span class="na">viewBox</span><span class="o">=</span><span class="s">&#34;0 -960 960 960&#34;</span> <span class="na">fill</span><span class="o">=</span><span class="s">&#34;currentColor&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">path</span>
</span></span><span class="line"><span class="cl">            <span class="na">d</span><span class="o">=</span><span class="s">&#34;M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">svg</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      {{- end }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {{- if .Description }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;post-description&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      {{ .Description }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {{- end }}
</span></span><span class="line"><span class="cl">    {{- if not (.Param &#34;hideMeta&#34;) }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;post-meta&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      {{- partial &#34;post_meta.html&#34; . -}}
</span></span><span class="line"><span class="cl">      {{- partial &#34;translation_list.html&#34; . -}}
</span></span><span class="line"><span class="cl">      {{- partial &#34;edit_post.html&#34; . -}}
</span></span><span class="line"><span class="cl">      {{- partial &#34;post_canonical.html&#34; . -}}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {{- end }}
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  {{- $isHidden := (.Param &#34;cover.hiddenInSingle&#34;) | default (.Param &#34;cover.hidden&#34;) | default false }}
</span></span><span class="line"><span class="cl">  {{- partial &#34;cover.html&#34; (dict &#34;cxt&#34; . &#34;IsSingle&#34; true &#34;isHidden&#34; $isHidden) }}
</span></span><span class="line"><span class="cl">  {{- if (.Param &#34;ShowToc&#34;) }}
</span></span><span class="line"><span class="cl">  {{- partial &#34;toc.html&#34; . }}
</span></span><span class="line"><span class="cl">  {{- end }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  {{- if .Content }}
</span></span><span class="line"><span class="cl">    {{- $content := .RawContent -}}
</span></span><span class="line"><span class="cl">    {{- $find := &#34;!\\[\\[(.*?)\\]\\]&#34; -}}
</span></span><span class="line"><span class="cl">    {{- $matches := findRE $find $content -}}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    {{- range $matches -}}
</span></span><span class="line"><span class="cl">      {{- $originalMatch := . -}}
</span></span><span class="line"><span class="cl">      {{- $pathAndWidth := replaceRE $find &#34;$1&#34; $originalMatch -}}
</span></span><span class="line"><span class="cl">      {{- $path := $pathAndWidth -}}
</span></span><span class="line"><span class="cl">      {{- $width := &#34;&#34; -}}
</span></span><span class="line"><span class="cl">      {{- if strings.Contains $pathAndWidth &#34;|&#34; -}}
</span></span><span class="line"><span class="cl">        {{- $parts := split $pathAndWidth &#34;|&#34; -}}
</span></span><span class="line"><span class="cl">        {{- $path = index $parts 0 -}}
</span></span><span class="line"><span class="cl">        {{- $width = index $parts 1 -}}
</span></span><span class="line"><span class="cl">      {{- end -}}
</span></span><span class="line"><span class="cl">      
</span></span><span class="line"><span class="cl">      {{- $image := resources.Get $path -}}
</span></span><span class="line"><span class="cl">      {{- if $image -}}
</span></span><span class="line"><span class="cl">        {{- $imgTag := printf &#34;<span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">\&#34;%s\&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">\&#34;%s\&#34;</span> <span class="na">loading</span><span class="o">=</span><span class="s">\&#34;lazy\&#34;&#34;</span> <span class="err">$</span><span class="na">image</span><span class="err">.</span><span class="na">RelPermalink</span> <span class="err">(</span><span class="na">strings</span><span class="err">.</span><span class="na">TrimSuffix</span> <span class="err">&#34;.</span><span class="na">webp</span><span class="err">&#34;</span> <span class="err">(</span><span class="na">strings</span><span class="err">.</span><span class="na">TrimSuffix</span> <span class="err">&#34;.</span><span class="na">png</span><span class="err">&#34;</span> <span class="err">(</span><span class="na">strings</span><span class="err">.</span><span class="na">TrimSuffix</span> <span class="err">&#34;.</span><span class="na">jpg</span><span class="err">&#34;</span> <span class="err">$</span><span class="na">path</span><span class="err">)))</span> <span class="na">-</span><span class="err">}}</span>
</span></span><span class="line"><span class="cl">        <span class="err">{{</span><span class="na">-</span> <span class="na">if</span> <span class="err">$</span><span class="na">width</span> <span class="na">-</span><span class="err">}}</span>
</span></span><span class="line"><span class="cl">          <span class="err">{{</span><span class="na">-</span> <span class="err">$</span><span class="na">imgTag </span><span class="o">=</span> <span class="s">printf</span> <span class="err">&#34;%</span><span class="na">s</span> <span class="na">style</span><span class="o">=</span><span class="s">\&#34;width:</span> <span class="err">%</span><span class="na">spx</span><span class="err">;\&#34;</span><span class="p">&gt;</span>&#34; $imgTag $width -}}
</span></span><span class="line"><span class="cl">        {{- else -}}
</span></span><span class="line"><span class="cl">          {{- $imgTag = printf &#34;%s&gt;&#34; $imgTag -}}
</span></span><span class="line"><span class="cl">        {{- end -}}
</span></span><span class="line"><span class="cl">        {{- $content = replace $content $originalMatch $imgTag -}}
</span></span><span class="line"><span class="cl">      {{- end -}}
</span></span><span class="line"><span class="cl">    {{- end -}}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    {{- $finalContent := $content | .RenderString -}}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;post-content&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      {{- if not (.Param &#34;disableAnchoredHeadings&#34;) }}
</span></span><span class="line"><span class="cl">        {{- partial &#34;anchored_headings.html&#34; $finalContent -}}
</span></span><span class="line"><span class="cl">      {{- else }}
</span></span><span class="line"><span class="cl">        {{- $finalContent | safeHTML -}}
</span></span><span class="line"><span class="cl">      {{- end }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  {{- end }}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">footer</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;post-footer&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {{- $tags := .Language.Params.Taxonomies.tag | default &#34;tags&#34; }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;post-tags&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      {{- range ($.GetTerms $tags) }}
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Permalink }}&#34;</span><span class="p">&gt;</span>{{ .LinkTitle }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      {{- end }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {{- if (.Param &#34;ShowPostNavLinks&#34;) }}
</span></span><span class="line"><span class="cl">    {{- partial &#34;post_nav_links.html&#34; . }}
</span></span><span class="line"><span class="cl">    {{- end }}
</span></span><span class="line"><span class="cl">    {{- if (and site.Params.ShowShareButtons (ne .Params.disableShare true)) }}
</span></span><span class="line"><span class="cl">    {{- partial &#34;share_icons.html&#34; . -}}
</span></span><span class="line"><span class="cl">    {{- end }}
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">footer</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  {{- if (.Param &#34;comments&#34;) }}
</span></span><span class="line"><span class="cl">  {{- partial &#34;comments.html&#34; . }}
</span></span><span class="line"><span class="cl">  {{- end }}
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">article</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">{{- end }}{{/* end main */}}
</span></span></code></pre></div><p>크게 건드렸던 건 이렇게 두개였던 것 같고, 한 4시간 정도 걸렸던 것 같다.</p>
<h2 id="배포과정-중-생긴-문제해결-과정">배포과정 중 생긴 문제해결 과정<a hidden class="anchor" aria-hidden="true" href="#배포과정-중-생긴-문제해결-과정">#</a></h2>
<p>그리고 배포를 할 것인데, 그냥 끼얹기보단 새롭게 orphan branch를 만들어서 이 브랜치를 <code>main</code> 브랜치로 바꾸어서 기존 플젝에 업데이트 해보았다.</p>
<p>우선 공식 <code>hugo</code> 사이트에서 아래 배포 스크립트를 그대로 적용해보았다. <code>TZ</code>만 우리나라 서울로 바꾸어주었고, 그대로 옮겨보았다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Build and deploy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">on</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">push</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">main</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">workflow_dispatch</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">permissions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">contents</span><span class="p">:</span><span class="w"> </span><span class="l">read</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">pages</span><span class="p">:</span><span class="w"> </span><span class="l">write</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">id-token</span><span class="p">:</span><span class="w"> </span><span class="l">write</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">concurrency</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l">pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">cancel-in-progress</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">defaults</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l">bash</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">jobs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">build</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l">ubuntu-latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">env</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">DART_SASS_VERSION</span><span class="p">:</span><span class="w"> </span><span class="m">1.90.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">GO_VERSION</span><span class="p">:</span><span class="w"> </span><span class="m">1.24.5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">HUGO_VERSION</span><span class="p">:</span><span class="w"> </span><span class="m">0.148.2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">NODE_VERSION</span><span class="p">:</span><span class="w"> </span><span class="m">22.18.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">TZ</span><span class="p">:</span><span class="w"> </span><span class="l">Europe/Oslo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Checkout</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/checkout@v5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">submodules</span><span class="p">:</span><span class="w"> </span><span class="l">recursive</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">fetch-depth</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Setup Go</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/setup-go@v5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">go-version</span><span class="p">:</span><span class="w"> </span><span class="l">${{ env.GO_VERSION }}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">cache</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Setup Node.js</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/setup-node@v4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">node-version</span><span class="p">:</span><span class="w"> </span><span class="l">${{ env.NODE_VERSION }}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Setup Pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/configure-pages@v5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Create directory for user-specific executable files</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          mkdir -p &#34;${HOME}/.local&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Install Dart Sass</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          curl -sLJO &#34;https://github.com/sass/dart-sass/releases/download/${DART_SASS_VERSION}/dart-sass-${DART_SASS_VERSION}-linux-x64.tar.gz&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          tar -C &#34;${HOME}/.local&#34; -xf &#34;dart-sass-${DART_SASS_VERSION}-linux-x64.tar.gz&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          rm &#34;dart-sass-${DART_SASS_VERSION}-linux-x64.tar.gz&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          echo &#34;${HOME}/.local/dart-sass&#34; &gt;&gt; &#34;${GITHUB_PATH}&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Install Hugo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          curl -sLJO &#34;https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_extended_${HUGO_VERSION}_linux-amd64.tar.gz&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          mkdir &#34;${HOME}/.local/hugo&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          tar -C &#34;${HOME}/.local/hugo&#34; -xf &#34;hugo_extended_${HUGO_VERSION}_linux-amd64.tar.gz&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          rm &#34;hugo_extended_${HUGO_VERSION}_linux-amd64.tar.gz&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          echo &#34;${HOME}/.local/hugo&#34; &gt;&gt; &#34;${GITHUB_PATH}&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Verify installations</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          echo &#34;Dart Sass: $(sass --version)&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          echo &#34;Go: $(go version)&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          echo &#34;Hugo: $(hugo version)&#34;
</span></span></span><span class="line"><span class="cl"><span class="sd">          echo &#34;Node.js: $(node --version)&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Install Node.js dependencies</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          [[ -f package-lock.json || -f npm-shrinkwrap.json ]] &amp;&amp; npm ci || true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Configure Git</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          git config core.quotepath false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Cache restore</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">cache-restore</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/cache/restore@v4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">${{ runner.temp }}/hugo_cache</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">hugo-${{ github.run_id }}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">restore-keys</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="l">hugo-</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Build the site</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">          hugo \
</span></span></span><span class="line"><span class="cl"><span class="sd">            --gc \
</span></span></span><span class="line"><span class="cl"><span class="sd">            --minify \
</span></span></span><span class="line"><span class="cl"><span class="sd">            --baseURL &#34;${{ steps.pages.outputs.base_url }}/&#34; \
</span></span></span><span class="line"><span class="cl"><span class="sd">            --cacheDir &#34;${{ runner.temp }}/hugo_cache&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Cache save</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">cache-save</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/cache/save@v4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">${{ runner.temp }}/hugo_cache</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">${{ steps.cache-restore.outputs.cache-primary-key }}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Upload artifact</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/upload-pages-artifact@v3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">with</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">./public</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">deploy</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">github-pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">${{ steps.deployment.outputs.page_url }}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l">ubuntu-latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">needs</span><span class="p">:</span><span class="w"> </span><span class="l">build</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Deploy to GitHub Pages</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">deployment</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l">actions/deploy-pages@v4</span><span class="w">
</span></span></span></code></pre></div><img src="/assets/images/%EC%83%88%EB%A1%9C%EC%9A%B4%20%EB%B8%94%EB%A1%9C%EA%B7%B8%20%EB%A6%AC%EB%89%B4%EC%96%BC%EC%9D%84%20%ED%99%98%EC%98%81%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94-1756097756323.webp" alt="새로운 블로그 리뉴얼을 환영해주세요-1756097756323" loading="lazy">
<p>기존 방식보다 <strong>무려 40초나 줄었고,</strong> 엄청 빠르게 빌드되는 걸 확인할 수 있다.</p>
<p>이 빌드가 그냥 처음부터 <code>Go</code> 를 다 깔고 하는 걸 생각하면 엄청 빠르단걸 확인할 수 있다.</p>
<img src="/assets/images/%EC%83%88%EB%A1%9C%EC%9A%B4%20%EB%B8%94%EB%A1%9C%EA%B7%B8%20%EB%A6%AC%EB%89%B4%EC%96%BC%EC%9D%84%20%ED%99%98%EC%98%81%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94-1756098002261.webp" alt="새로운 블로그 리뉴얼을 환영해주세요-1756098002261" loading="lazy">
<p>이렇게 이제 블로그 배포가 잘 되는 걸 확인할 수 있다.</p>
<p>하지만 보는 것처럼 글이 하나도 없다. 이건 당연하다. 왜냐하면 위에서 봤던 것처럼 내 개인 옵시디언 볼트에서 끌어와서 빌드하는 방식이니, 볼트 자체를 깃허브에 업로드하는게 아니니까 그렇다.</p>
<p>여기서 내가 생각해본게 두가진데,,</p>
<ol>
<li>symlink 같은걸 도입해서 내 볼트에 있는 블로그 포스트도 git이 인식해서 올려줄 수 있도록 하거나</li>
<li>처음부터 블로그 포스트(<code>.md</code>) 들을 git에 업로드하도록 만들기</li>
</ol>
<p>내가 옵시디언과의 연동성을 생각해볼때 2번은 절대 싫었다. 왜냐하면 내 옵시디언 저장소는 icloud에서 관리되기 때문이다.</p>
<p>결국엔 symlink 같은걸 도입하거나, 업로드 스크립트를 만들거나 해야할 것 같았다.</p>
<h3 id="1-배포를-위해서-심링크를-쓰기">1. 배포를 위해서 심링크를 쓰기<a hidden class="anchor" aria-hidden="true" href="#1-배포를-위해서-심링크를-쓰기">#</a></h3>
<p>우선, 진짜 symlink가 git에서 진짜 되는지 한번 해볼 필요가 있다. 당시에 <code>git</code> 이 심볼릭 링크를 어떻게 다루는지 몰라서 일단 직접 만들어보았다.</p>
<p>일단은 컨텐츠를 휴고에서 옮기는 <code>mount</code> 를 삭제하고 심링크를 추가해보았다.</p>
<p>심링크 추가까지는 너무 잘되었다. 휴고 블로그 서버도 잘 작동되었다. <code>vscode</code> 에서도 단순히 폴더로 인식됐다.</p>
<img src="/assets/images/%EC%83%88%EB%A1%9C%EC%9A%B4%20%EB%B8%94%EB%A1%9C%EA%B7%B8%20%EB%A6%AC%EB%89%B4%EC%96%BC%EC%9D%84%20%ED%99%98%EC%98%81%ED%95%B4%EC%A3%BC%EC%84%B8%EC%9A%94-1756098346361.webp" alt="새로운 블로그 리뉴얼을 환영해주세요-1756098346361" loading="lazy">
<p>하지만 깃에서 추가할 때는 문제가 되었는데, 그 이유는 깃에서는 <a href="https://www.geeksforgeeks.org/git/how-does-git-handle-symbolic-links/">심링크 자체에서 링크 정보만을 커밋한다.</a></p>
<p>그래서 깃허브에서는 &ldquo;링크되는 정보&rdquo; 자체만을 저장해서 버전 관리되기 때문에 하드 링크로 바꾸어보려고 했는데.. 이게 어쩌나, <a href="https://askubuntu.com/questions/210741/why-are-hard-links-not-allowed-for-directories">디렉토리는 하드링크를 할 수 없다!</a> 왜냐하면 무한루프가 생길 수 있기 때문이다.</p>
<h3 id="2-셸-스크립트-사용">2. 셸 스크립트 사용<a hidden class="anchor" aria-hidden="true" href="#2-셸-스크립트-사용">#</a></h3>
<p>그래서 결국 스크립트를 사용해서 배포용 스크립트를 만들기로 했다. 구글링을 직접 하면서 어떤 방법이 있나 찾아보았다.</p>
<p>다행히, 옵시디언을 좋아하는 한 개발자분께서 <code>shell commands</code> 라는 옵시디언 플러그인을 만들어두셨다.</p>
<p><a href="https://publish.obsidian.md/shellcommands/Index">https://publish.obsidian.md/shellcommands/Index</a></p>
<p>옵시디언 볼트에서 직접 터미널을 통해 셸 스크립트를 실행할 수 있는 플러그인이다.</p>
<p>그래서 아래처럼 직접 내 블로그 포스트 디렉토리를 찾아 사이트를 <strong>빌드해서 그냥 이대로 올렸다.</strong></p>
<p>어차피 로컬에서 올려야한다면, <code>github action</code> 을 통해서 빌드를 하고 올리는게 낫다고 생각했다.</p>
<h3 id="rsync-명령어"><code>rsync</code> 명령어<a hidden class="anchor" aria-hidden="true" href="#rsync-명령어">#</a></h3>
<p>그런데, <code>mv</code> 를 통해 빌드 파일을 버전관리하는 디렉토리로 옮기던 중 애로 사항이 있었다.</p>
<pre tabindex="0"><code>mv: rename public/archives to public-git/archives: Directory not empty
mv: rename public/assets to public-git/assets: Directory not empty
mv: rename public/categories to public-git/categories: Directory not empty
mv: rename public/page to public-git/page: Directory not empty
mv: rename public/posts to public-git/posts: Directory not empty
mv: rename public/search to public-git/search: Directory not empty
mv: rename public/tags to public-git/tags: Directory not empty
To https://github.com/moozeh/blog-static.git
   e499e5e..5e605e7  main -&gt; main
</code></pre><p>위처럼 <code>Directory not empty</code> 와 같은 문제가 있었다.</p>
<p>그래서 어차피 복사할 거 그냥 <code>rsync</code> 명령어를 사용했다.</p>
<p><code>rsync</code> 같은 경우 대상을 완벽하게 동일하게 복사해주므로 딱 나에게 필요한 명령어였다.</p>
<p>이 명령어가 보통 백업할 때 쓰이는 듯하다. 실제로 나중에 백업 프로그램을 만들 일이 생긴다면 이 명령어를 참고해보는 것도 좋을 것 같다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">rsync -ahv <span class="o">[</span>SORCE_DIR<span class="o">]</span> <span class="o">[</span>TARGET_DIR<span class="o">]</span>
</span></span></code></pre></div><p>위와 같이 사용하여 복사할 수 있다. 그밖의 옵션에 관해선 이렇다.</p>
<ul>
<li><code>-a</code> 옵션 : 아카이브 모드. 권한, 시간, 심볼릭 링크 등 세세한 정보까지 복사해준다.</li>
<li><code>-v</code> 옵션 : verbose. 스크립트를 사용할 때 아는 그것. 디버깅에 용이하다.</li>
<li><code>-h</code> 옵션 : human readable. 복사할 때 출력시 결과를 <code>KB</code>, <code>MB</code> 등 사람이 보기 편하게 나타내게해준다.</li>
</ul>
<h3 id="push"><code>push</code><a hidden class="anchor" aria-hidden="true" href="#push">#</a></h3>
<h2 id="앞으로의-방침">앞으로의 방침<a hidden class="anchor" aria-hidden="true" href="#앞으로의-방침">#</a></h2>
<p>앞으로 블로그글을 쓸 때는 그냥 <code>타인에게 공유할 일이 잦을 문서</code>, <code>고민하는 과정을 쓰는 문서</code> 로 나누어서 쓸 것 같다.</p>
<p>그야 그도 그럴게, <strong>문제 해결을 어떻게 한번에 하겠나?</strong> 한번에 해결이 되면 나 혼자 이미 회사를 차렸지.. 계속 고민해서 끊임없이 완벽보단 완주를 노려봐야할 것 같다.</p>
<p>실제로 부스트캠프를 하면서도 내 고민과정을 제대로 기록하지 못한 것에 후회를 많이 했었는데 아직 좀 더 고쳐야할 것 같아서 내적으로 많이 고민이 되긴 한다.</p>
<p>내가 완벽하다고 생각하기 보단 계속 이렇게 달려야 좋은 사람이고 발전하는 사람이 아닐까 생각한다. 다시 한번 잘 노력해보자!</p>


    </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="next" href="https://blog.moozeh.org/posts/2025-03-07-spring-jpa-nm-%EA%B4%80%EA%B3%84-%ED%92%80%EC%96%B4%EB%82%B4%EA%B8%B0-1-%EC%97%94%ED%8B%B0%ED%8B%B0%EC%97%90-%EA%B1%B8%EB%A6%B0-%EA%B4%80%EA%B3%84-%ED%85%8C%EC%9D%B4%EB%B8%94%EC%9D%84-%ED%92%80%EC%96%B4%EB%82%B4%EA%B8%B0/">
    <span class="title">Next »</span>
    <br>
    <span>[Spring JPA] 영속성 컨텍스트 시리즈 (2) - N:M 관계 엔티티로 풀어내기</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>© <a href="https://github.com/moozeh">moozeh</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
